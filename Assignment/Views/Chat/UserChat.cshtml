<link href="~/css/chatuser.css" rel="stylesheet" />
@{
    ViewData["Title"] = "Trò truyện với nhân viên";
}

<div class="chat-container">
    <!-- Header -->
    <div class="chat-header">
        <h5 class="mb-0">
            <i class="fas fa-comments me-2"></i>
            Chat
        </h5>
    </div>

    <!-- Messages -->
    <div class="chat-messages">
        @if (User.Identity != null && !User.Identity.IsAuthenticated)
        {
            <div class="alert alert-warning text-center">
                Dử liệu cuộc trò truyện này sẽ có thể bị mất! Vui lòng <a asp-action="Login" asp-controller="User" class="alert-link">Đăng nhập tài khoản</a> để không bị mất dử liệu cuộc trò chuyện
            </div>
        }
        <div id="messageList"></div>
    </div>

    <!-- Input -->
    <div class="chat-input">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Nhập tin nhắn..." id="messageInput">
            <button class="btn btn-primary" type="button" id="sendButton" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
<script>
    const isIdentified = "@(User.Identity != null && User.Identity.IsAuthenticated)" == "True" ? true : false;
</script>
<script src="~/js/chatuser.js"></script>